!function(n,t){function r(n,t){return t?f(255&n)+r(n>>8,t-1):""}function e(n,t){return t?e(n>>8,t-1)+f(255-n&255):""}function o(n,t,o){return o?e(n,t):r(n,t)}function a(n,r){var e,o=n.length,a=o-1,i=0,f=t.pow;if(r)for(e=0;o>e;e++)i+=(255-n.charCodeAt(e))*f(256,a-e);else for(e=0;o>e;e++)i+=n.charCodeAt(e)*f(256,e);return i}function i(n,r,e,o){var a=t.pow,f=t.floor,u=i.convertFromBinary,d=i.convertToBinary,c=n/8,h=a(2,n),s=h/2,m=s-1,l=1/s,p=1/m;return o?e?r?function(n,t){return n=f(0>n?n*s+h:n*m),d(n,c,t)}:function(n,t){return d(f(n*m),c,t)}:r?function(n,t){return d(0>n?n+h:n,c,t)}:function(n,t){return d(n,c,t)}:e?r?function(n,t){var r=u(n,t);return r>m?(r-h)*l:r*p}:function(n,t){return u(n,t)*p}:r?function(n,t){var r=u(n,t);return r>m?r-h:r}:function(n,t){return u(n,t)}}var f=String.fromCharCode,u=!0,d=!1;i.convertToBinary=o,i.convertFromBinary=a,i.fromQ32=i(32,u,u,u),i.toQ32=i(32,u,u,d),i.fromQ24=i(24,u,u,u),i.toQ24=i(24,u,u,d),i.fromQ16=i(16,u,u,u),i.toQ16=i(16,u,u,d),i.fromQ8=i(8,u,u,u),i.toQ8=i(8,u,u,d),i.fromInt32=i(32,u,d,u),i.toInt32=i(32,u,d,d),i.fromInt16=i(16,u,d,u),i.toInt16=i(16,u,d,d),i.fromInt8=i(8,u,d,u),i.toInt8=i(8,u,d,d),i.fromUint32=i(32,d,d,u),i.toUint32=i(32,d,d,d),i.fromUint16=i(16,d,d,u),i.toUint16=i(16,d,d,d),i.fromUint8=i(8,d,d,u),i.toUint8=i(8,d,d,d),n.Binary=i}(this,Math),function(n,t){function r(n){this.data=n}function e(n,t,r){var e=t/8;i["read"+n+t]=function(n){return r(this.read(e),n)}}var o,a,i=r.prototype={read:function(n){var t=this,r=t.data.substr(0,n);return t.skip(n),r},skip:function(n){var t=this,r=t.data=t.data.substr(n);return t.pointer+=n,r.length},readBuffer:function(n,t,r){for(var e=this,o="read"+r+t,a=n.length,i=0;e.data&&a>i;)n[i++]=e[o]();return i}};for(o in t)a=/to([a-z]+)([0-9]+)/i.exec(o),a&&e(a[1],a[2],t[o]);n.Stream=r,r.newType=e}(this,this.Binary),this.PCMData=function(n,t){function r(n){return("string"==typeof n?r.decode:r.encode)(n)}return r.decodeFrame=function(n,r,e){if(8===r){var o=new(window.Uint8Array||Array)(e.length);for(new t(n).readBuffer(o,8,"Uint"),r=0;r<e.length;r++)e[r]=127.5*(o[r]-127.5)}else new t(n).readBuffer(e,r,"Q");return e},r.encodeFrame=function(t,r){var e,o=n[(8===r?"fromUint":"fromQ")+r],a=t.length,i="";if(8===r)for(e=0;a>e;e++)i+=o(127.5*t[e]+127.5);else for(e=0;a>e;e++)i+=o(t[e]);return i},r.decode=function(n,e){function o(){f=a.read(4),u=a.readUint32(),c=a.read(u),s=w[f]=w[f]||[],"data"===f?(d=~~(u/y),h=g.data=new("undefined"!=typeof Float32Array?Float32Array:Array)(d),r.decodeFrame(c,8*y,h)):s.push(c),e&&(a.data?setTimeout(o,1):e(g))}var a=new t(n),i=(a.read(4),a.readUint32());a=new t(a.read(i));var f,u,d,c,h,s,m=(a.read(4),a.read(4),a.readUint32()),l=new t(a.read(m)),p=(l.readUint16(),l.readUint16()),U=(l.readUint32(),l.readUint32()),v=l.readUint16(),y=v/p,w=(l.readUint16(),{}),g={channelCount:p,bytesPerSample:v/p,sampleRate:U/v,chunks:w,data:h};if(e)a.data?o():e(g);else for(;a.data;)o();return g},r.encode=function(t,e){var o,a,i,f,u=n.fromUint32,d=n.fromUint16,c=t.data,h=t.sampleRate,s=t.channelCount||1,m=t.bytesPerSample||1,l=8*m,p=s*m,U=h*p,v=c.length,y=v*m,w=(Math.pow(2,l-1)-1,[]),g="";if(w.push("fmt "+u(16)+d(1)+d(s)+u(h)+u(U)+d(p)+d(l)),w.push("data"+u(y)+r.encodeFrame(c,l)),f=t.chunks)for(a in f)if(f.hasOwnProperty(a))for(o=f[a],i=0;i<o.length;i++)g=o[i],w.push(a+u(g.length)+g);return w=w.join(""),w="RIFF"+u(w.length)+"WAVE"+w,e&&setTimeout(function(){e(w)},1),w},r}(this.Binary,this.Stream);