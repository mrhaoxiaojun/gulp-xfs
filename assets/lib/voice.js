var RongIMLib;!function(RongIMLib){var RongIMVoice=function(){function RongIMVoice(){}return RongIMVoice.init=function(){if(this.isIE){var e=document.createElement("div");e.setAttribute("id","flashContent"),document.body.appendChild(e);var n=document.createElement("script");n.src="/lib/swfobject.js";var o=document.getElementsByTagName("head")[0];o.appendChild(n),setTimeout(function(){var e="11.4.0",n={},o={};o.quality="high",o.bgcolor="#ffffff",o.allowscriptaccess="sameDomain",o.allowfullscreen="true";var i={};i.id="player",i.name="player",i.align="middle",swfobject.embedSWF("/lib/player.swf","flashContent","1","1",e,null,n,o,i)},120)}else for(var i=["/lib/pcmdata.min.js","/lib/libamr-min.js"],t=0,a=i.length;a>t;t++){var n=document.createElement("script");n.src=i[t],document.head.appendChild(n)}},RongIMVoice.play=function(e,n){var o=this;o.isIE?o.thisMovie().doAction("init",e):(o.palyVoice(e),o.onCompleted(n))},RongIMVoice.stop=function(){var e=this;e.isIE?e.thisMovie().doAction("stop"):e.element&&e.element.stop()},RongIMVoice.onprogress=function(){},RongIMVoice.thisMovie=function(){return eval("window['player']")},RongIMVoice.onCompleted=function(e){var n=this,o=0,i=setInterval(function(){o++,n.onprogress(),o>=e&&clearInterval(i)},1e3);n.isIE&&n.thisMovie().doAction("play")},RongIMVoice.base64ToBlob=function(e,n){var o;n&&(o={type:n}),e=e.replace(/^(.*)[,]/,"");for(var i=1024,t=atob(e),a=t.length,r=Math.ceil(a/i),c=new Array(r),l=0;r>l;++l){for(var s=l*i,d=Math.min(s+i,a),u=new Array(d-s),g=s,f=0;d>g;++f,++g)u[f]=t[g].charCodeAt(0);c[l]=new Uint8Array(u)}return new Blob(c,o)},RongIMVoice.palyVoice=function(e){var n=new FileReader,o=this.base64ToBlob(e,"audio/amr"),i=this;n.onload=function(){var e=new AMR({benchmark:!0}).decode(n.result);i.element=AMR.util.play(e)},n.readAsBinaryString(o)},RongIMVoice.isIE=/IE/.test(navigator.userAgent),RongIMVoice}();RongIMLib.RongIMVoice=RongIMVoice}(RongIMLib||(RongIMLib={}));